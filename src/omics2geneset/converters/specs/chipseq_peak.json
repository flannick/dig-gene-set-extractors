{
  "name": "chipseq_peak",
  "description": "ChIP-seq peaks to gene weights via shared peak-to-gene linking",
  "inputs": [
    {"name": "peaks", "type": "bed", "description": "Peak intervals with a numeric signal column", "required": true},
    {"name": "gtf", "type": "gtf", "description": "Gene annotation with gene features", "required": true}
  ],
  "parameters": [
    {"name": "weight_column", "type": "int", "default": 5, "help": "1-based signal column in peaks file"},
    {"name": "link_method", "type": "string", "default": "promoter_overlap", "enum": ["promoter_overlap", "nearest_tss", "distance_decay"], "help": "Peak-to-gene linkage strategy"},
    {"name": "promoter_upstream_bp", "type": "int", "default": 2000, "help": "Promoter upstream window for promoter_overlap"},
    {"name": "promoter_downstream_bp", "type": "int", "default": 500, "help": "Promoter downstream window for promoter_overlap"},
    {"name": "max_distance_bp", "type": "int_or_none", "default": null, "help": "Distance cap for nearest/distance modes; resolved default by link_method"},
    {"name": "decay_length_bp", "type": "int", "default": 50000, "help": "Exponential decay length for distance_decay"},
    {"name": "max_genes_per_peak", "type": "int", "default": 5, "help": "Maximum linked genes per peak for distance_decay"},
    {"name": "peak_weight_transform", "type": "string", "default": "positive", "enum": ["signed", "abs", "positive", "negative"], "help": "Transform applied to peak signal"},
    {"name": "normalize", "type": "string", "default": "l1", "enum": ["l1", "none"], "help": "Final gene-weight normalization"}
  ],
  "outputs": [
    {"name": "geneset.tsv", "description": "Gene-weight table"},
    {"name": "geneset.meta.json", "description": "Run metadata and provenance"}
  ]
}
